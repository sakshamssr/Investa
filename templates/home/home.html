{% extends 'login/loginBase.html' %}
{% load static %}

{% block website %}

<style>
    .countdown-card {
        background-color: #ffffff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        padding: 16px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .countdown-timer {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 8px;
        color: #555555;
    }

    .countdown-message {
        font-size: 1rem;
        color: #777777;
    }
    .up-arrow {
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 15px solid #3498db; /* Change color as needed */
        }

        /* Down arrow */
        .down-arrow {
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 15px solid #e74c3c; /* Change color as needed */
        }

        /* Animated arrow going up */
        .animated-up-arrow {
            animation: animateUpArrow 1s infinite alternate; /* Adjust animation speed and style as needed */
        }

        @keyframes animateUpArrow {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(-5px);
            }
        }
        @keyframes floatAnimation {
        0% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
        100% {
            transform: translateY(0);
        }
    }

    .float-card {
        animation: floatAnimation 3s infinite;
    }
</style>
<script>
    function updateCountdown() {
        const marketCloseTime = new Date();
        marketCloseTime.setUTCHours(16, 0, 0, 0); // US market close time (4:00 PM Eastern Time)

        const now = new Date();
        const timeDifference = marketCloseTime - now;

        const hours = Math.floor(timeDifference / (1000 * 60 * 60));
        const minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeDifference % (1000 * 60)) / 1000);

        document.getElementById('countdown-timer').innerText = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    setInterval(updateCountdown, 1000);
</script>

<div class="flex justify-start items-start flex-col md:flex-row">
    <div class="relative max-w-full max-h-128">
        <!-- Static image -->
        <img src="{% static 'Investa.png' %}" class="w-full h-full object-contain" alt="Dive into ODT">
        <hr class="border-gray-200 sm:mx-auto dark:border-gray-700" />
    </div>
    <div class="flex pl-8 pt-16 md:pl-8 ml-16">
        <div class="grid grid-cols-2 gap-4 md:grid-cols-2 p-2 md:p-8 ml-2 md:ml-16">
            {% for i in topc %}
            <div class="float-card bg-gray-900 dark:bg-gray-800 shadow-md md:p-2 p-4 rounded-md ml-4">
                <div class="text-xl font-semibold mb-2 dark:text-white">{{i.name}}</div>
                <div class="text-gray-600 dark:text-gray-400 mb-2">Current Price: ${{i.LastPrice}}</div>
                <div class="text-gray-600 dark:text-gray-400 mb-2">Last Price: ${{i.PreviousClosePrice}}</div>
                <div class="flex items-center mb-2">
                    <span class="text-{{i.color}}-500 dark:text-{{i.color}}-400 mr-1">{{i.ChangePercent}}%</span>
                    <svg class="w-4 h-4 text-{{i.color}}-500 dark:text-{{i.color}}-400{{i.transform}}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                        <path fill-rule="evenodd" d="M10 0a1 1 0 011 1v9a1 1 0 01-1 1H5a1 1 0 010-2h4V2a1 1 0 011-1z" clip-rule="evenodd" />
                        <path fill-rule="evenodd" d="M0 10a1 1 0 011-1h9a1 1 0 110 2H1a1 1 0 01-1-1z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-{{i.color}}-500 dark:text-{{i.color}}-400 mr-1">{{i.ChangeAbsolute}}%</span>
                </div>
            </div>
            {% endfor %}
            <div class="float-card bg-gray-900 dark:bg-gray-800 shadow-md md:p-2 p-4 rounded-md">
                <div class="countdown-card">
                    <div class="text-lg font-semibold mb-2 dark:text-black">US Market Closure:</div>
                    <div class="countdown-timer" id="countdown-timer">--:--:--</div>
                    <div class="countdown-message">Remaining</div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}